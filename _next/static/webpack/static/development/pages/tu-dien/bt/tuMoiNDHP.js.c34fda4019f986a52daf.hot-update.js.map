{"version":3,"file":"static/webpack/static\\development\\pages\\tu-dien\\bt\\tuMoiNDHP.js.c34fda4019f986a52daf.hot-update.js","sources":["webpack:///./pages/tu-dien/bt/tuMoiNDHP.js"],"sourcesContent":["import styled from 'styled-components';\r\nimport {\r\n  Row,\r\n  Col,\r\n  FormGroup,\r\n  Label,\r\n  Container,\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nimport pinyin from 'chinese-to-pinyin';\r\n\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport Page from '../../../components/tuDien/page'\r\nimport * as GA from \"../../../utils/analystics\";\r\nimport Loading from '../../../components/tuDien/loader';\r\nimport Layout from '../../../components/tuDien/layout'\r\nimport { replaceAll } from '../../../utils/utils';\r\n\r\nfunction getHanViet(dict, chinesse) {\r\n  let result = '', i =0, hanViet;\r\n  let missing,mean;\r\n  for (i=0;i<chinesse.length;i++) {\r\n    mean = dict[chinesse[i]];\r\n    if(mean){\r\n      hanViet = mean[\"hv\"].trim();\r\n      if (hanViet.indexOf(' ')>0) {\r\n        hanViet = '('+hanViet+')';\r\n      }\r\n    } else {\r\n      hanViet ='';\r\n      missing += ',' + chinesse[i];\r\n    }\r\n    result += hanViet + ' ';\r\n  }\r\n  if(missing) {\r\n    console.log('Từ điển thiếu', missing);\r\n  }\r\n  return result.trim();\r\n}\r\n\r\nexport default class extends Page {\r\n  static async getInitialProps({req, query}) {\r\n    super.getInitialProps({req, query});\r\n    let props = await super.getInitialProps({req})\r\n    // props.word = query.id\r\n    return props\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { words } = props;\r\n\r\n    this.state = {\r\n      loading: true,\r\n      content: '',\r\n      chinesse: '滲透(sấm thấu - shèn tòu): thấm vào\\n可是(khả thị - kě shì): chính là',\r\n      hanViet: '',\r\n      bacKinh: '',\r\n      tuMois: '',\r\n      dict: {},\r\n    };\r\n    axios.get('https://raw.githubusercontent.com/thanglamhuu/nddhp.github.io/master/dictClient.json').then((res) => {\r\n      this.setState({\r\n        dict: res.data,\r\n        loading: false,\r\n      });\r\n    });\r\n    this.onChangeHandlerChuHan = this.onChangeHandlerChuHan.bind(this);\r\n  }\r\n\r\n  onChangeHandlerChuHan(e) {\r\n    const {dict} = this.state;\r\n    const chinesse = e.target.value;\r\n    let chuHans = [];\r\n    const words = chinesse.split('\\n');\r\n    let means=[], word='', chuHan='', hanViet='', bacKinh='', tuHaiBen='';\r\n    let j=0;\r\n    let tuMois = '';\r\n\r\n    let i=0;\r\n    for (i=0;i<words.length;i++) {\r\n      try {\r\n        word='', chuHan='', hanViet='', bacKinh='';\r\n        word = words[i].trim();\r\n        //視(shì)之(zhī)自(zì)然(rán) nhìn thấy bình thường\r\n        word = replaceAll(word,'：',':' );\r\n        word = replaceAll(word,') ',':' );\r\n        word = replaceAll(word,') :',':' );\r\n        word = replaceAll(word,'):',':' );\r\n        tuHaiBen = word.split(':');\r\n\r\n        //視(shì)之(zhī)自(zì)然(rán)\r\n        let hanBks = tuHaiBen[0].split(')');\r\n        for(j=0;j<hanBks.length;j++){\r\n          let hanbk = hanBks[j].split('(');\r\n          chuHan += hanbk[0];\r\n          if(hanbk.length==2)\r\n            bacKinh += ' ' + hanbk[1];\r\n          else\r\n            bacKinh += ' ' + pinyin(hanbk[0]);\r\n\r\n          console.log('tuHaiBen',tuHaiBen,'hanbk',hanbk, 'chuHan',chuHan,'getHanViet(dict, chuHan)',getHanViet(dict, chuHan),'bacKinh',bacKinh);\r\n        }\r\n\r\n        tuMois += chuHan + '(' + getHanViet(dict, chuHan) + ' - ' + bacKinh + ') ' + tuHaiBen[1]  + '\\n';\r\n      } catch (e) {\r\n        console.log(word,means,e);\r\n      }\r\n    }\r\n\r\n    this.setState({chinesse, tuMois });\r\n  }\r\n\r\n  render() {\r\n      const {chuHans,chinesse,tuMois} = this.state;\r\n\r\n      GA.trackPageView(`bt-convert`);\r\n      // GA.trackEvent('TraTu', 'Han', word);\r\n      return (\r\n        <Layout {...this.props} navmenu={false} container={false}>\r\n          <Container>\r\n            <Row>\r\n              <h2 className=\"h1Title\">Tạo danh sách từ import</h2>\r\n            </Row>\r\n            <Row>\r\n              <FormGroup style={{width:'100%'}}>\r\n                <Label for=\"inputChuHan\">Nhập nội dung chữ Hán</Label>\r\n                <TextareaAutosize\r\n                  className=\"txtAutoSize\"\r\n                  id=\"inputChuHan\"\r\n                  placeholder=\"Chữ Hán\"\r\n                  value={chinesse}\r\n                  onChange={this.onChangeHandlerChuHan}\r\n                />\r\n              </FormGroup>\r\n            </Row>\r\n            <Col>\r\n              <h4>Kết quả</h4>\r\n              <span>Vui lòng click lên từng chữ để xem từ điển</span>\r\n              <TextareaAutosize\r\n                className=\"txtAutoSize\"\r\n                id=\"inputChuHan\"\r\n                placeholder=\"Chữ Hán\"\r\n                value={tuMois}\r\n                />\r\n            </Col>\r\n          </Container>\r\n        </Layout>\r\n      )\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAOA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;;;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AAAA;AAAA;AAAA;AACA;;AADA;AAEA;AACA;;;;;;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AAFA;AAIA;AACA;AApBA;AAqBA;AACA;;;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAaA;AACA;AACA;AACA;AAJA;AAUA;;;;AA9GA;AACA;;;;;A","sourceRoot":""}